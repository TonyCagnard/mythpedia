{% load static %}

<nav class="bg-blue-600 text-white p-4 shadow-lg sticky top-0 z-50">
    <div class="container mx-auto">
        <div class="flex flex-col md:flex-row justify-between items-center">
            {# Logo et titre du site #}
            <div class="flex items-center mb-4 md:mb-0">
                <a href="{% if user.is_authenticated %}{% url 'mythpedia:mythology_list' %}{% else %}{% url 'login' %}{% endif %}" class="text-2xl font-bold hover:text-blue-100 transition-colors flex items-center">
                    <i class="fas fa-book-open mr-2"></i>MythPedia
                </a>
            </div>
            
            {# Menu de navigation principal #}
            <div class="flex flex-wrap items-center justify-center md:justify-end space-x-2 sm:space-x-3 md:space-x-4">
                {# Lien vers les mythologies #}
                <a href="{% url 'mythpedia:mythology_list' %}" class="px-3 py-2 rounded-md hover:bg-blue-700 transition-colors text-sm font-medium">
                    <i class="fas fa-globe-americas mr-1"></i>Mythologies
                </a>
                
                {# Lien vers la recherche #}
                <a href="{% url 'mythpedia:advanced_search' %}" class="px-3 py-2 rounded-md hover:bg-blue-700 transition-colors text-sm font-medium">
                    <i class="fas fa-search mr-1"></i>Recherche
                </a>
                
                {# Liens conditionnels pour les utilisateurs connectés #}
                {% if user.is_authenticated %}
                    <a href="{% url 'mythpedia:user_favorites_list' %}" class="px-3 py-2 rounded-md hover:bg-blue-700 transition-colors text-sm font-medium">
                        <i class="fas fa-heart mr-1"></i>Mes Favoris
                    </a>
                    <a href="{% url 'mythpedia:submit_suggestion' %}" class="px-3 py-2 rounded-md hover:bg-blue-700 transition-colors text-sm font-medium">
                        <i class="fas fa-lightbulb mr-1"></i>Suggérer
                    </a>
                    
                    {# Lien vers l'admin pour les superutilisateurs #}
                    {% if user.is_staff %}
                        <a href="{% url 'admin:index' %}" class="px-3 py-2 rounded-md hover:bg-blue-700 transition-colors text-sm font-medium">
                            <i class="fas fa-cog mr-1"></i>Admin
                        </a>
                    {% endif %}
                {% else %}
                    {# Liens d'authentification pour les visiteurs #}
                    <a href="{% url 'register' %}" class="px-3 py-2 rounded-md hover:bg-blue-700 transition-colors text-sm font-medium">
                        <i class="fas fa-user-plus mr-1"></i>Inscription
                    </a>
                    <a href="{% url 'login' %}" class="px-3 py-2 rounded-md hover:bg-blue-700 transition-colors text-sm font-medium">
                        <i class="fas fa-sign-in-alt mr-1"></i>Connexion
                    </a>
                {% endif %}
            </div>
        </div>
        
    </div>
</nav>

{# Messages de notification (déplacés ici pour être visibles partout) #}
{% if messages %}
    <div class="fixed top-20 right-4 z-50 max-w-sm">
        {% for message in messages %}
            <div class="mb-2 p-4 text-sm rounded-md shadow-lg
                {% if message.tags == 'success' %}bg-green-100 border border-green-200 text-green-700
                {% elif message.tags == 'error' %}bg-red-100 border border-red-200 text-red-700
                {% elif message.tags == 'info' %}bg-blue-100 border border-blue-200 text-blue-700
                {% elif message.tags == 'warning' %}bg-yellow-100 border border-yellow-200 text-yellow-700
                {% else %}bg-gray-100 border border-gray-200 text-gray-700
                {% endif %}"
                 role="alert">
                {{ message }}
            </div>
        {% endfor %}
    </div>
    
    {# Script pour fermer automatiquement les messages #}
    <script>
        setTimeout(function() {
            const messages = document.querySelectorAll('[role="alert"]');
            messages.forEach(function(message) {
                message.style.opacity = '0';
                message.style.transition = 'opacity 0.5s';
                setTimeout(function() {
                    message.remove();
                }, 500);
            });
        }, 5000); // Les messages disparaissent après 5 secondes
    </script>
{% endif %}